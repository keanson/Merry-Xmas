<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ğŸ„ åœ£è¯å¿«ä¹</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#102b3f;
      --gold:#ffd37a;
      --red:#ff4d4d;
      --glass: rgba(255,255,255,.10);
      --shadow: rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font-family: -apple-system,BlinkMacSystemFont,"PingFang SC","Noto Sans CJK SC","Segoe UI",Roboto,Helvetica,Arial,sans-serif;}
    body{
      overflow:hidden;
      background: radial-gradient(1200px 800px at 50% 0%, #1b3d5a 0%, var(--bg2) 35%, var(--bg1) 75%);
      color:#fff;
    }
    canvas#fx{position:fixed; inset:0; width:100%; height:100%; z-index:1; pointer-events:none;}
    .wrap{
      position:relative; z-index:2;
      height:100%; width:100%;
      display:flex; align-items:center; justify-content:center;
      padding: clamp(14px, 4vw, 36px);
    }
    .card{
      width:min(740px, 96vw);
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
    }
    .top{
      padding: 22px 22px 16px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
    }
    .title{
      line-height:1.1;
    }
    .title h1{
      margin:0;
      font-size: clamp(26px, 3.6vw, 40px);
      letter-spacing:.5px;
      text-shadow: 0 10px 40px rgba(0,0,0,.4);
    }
    .title p{
      margin: 10px 0 0;
      font-size: 14px;
      opacity:.85;
    }
    .badge{
      display:flex; align-items:center; gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      font-size: 13px;
      opacity:.92;
      user-select:none;
    }
    .badge .dot{
      width:9px; height:9px; border-radius:99px;
      background: var(--red);
      box-shadow: 0 0 18px rgba(255,77,77,.6);
    }
    .stage{
      padding: 0 22px 22px;
    }
    .hint{
      margin: 0 0 14px;
      font-size: 13px;
      opacity:.8;
      display:flex; gap:10px; align-items:center;
      user-select:none;
    }
    .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      color:#111;
      font-weight:700;
      padding: 12px 16px;
      border-radius: 14px;
      background: linear-gradient(180deg, #ffe9b6, #ffd37a);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      transition: transform .15s ease, filter .15s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{transform: scale(.98)}
    .btn[disabled]{opacity:.55; cursor:default; filter:saturate(.8)}
    /* Door scene */
    .scene{
      width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 18px;
      position:relative;
      overflow:hidden;
      background:
        radial-gradient(1200px 700px at 20% 30%, rgba(255,255,255,.12), transparent 55%),
        radial-gradient(900px 600px at 80% 40%, rgba(255,211,122,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.12));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.18);
    }
    .lights{
      position:absolute; left:0; right:0; top:10px; height:28px;
      display:flex; gap:10px; justify-content:center; align-items:center;
      opacity:.9;
      filter: drop-shadow(0 12px 18px rgba(0,0,0,.35));
      pointer-events:none;
    }
    .bulb{
      width:12px; height:18px; border-radius: 8px 8px 10px 10px;
      background: rgba(255,255,255,.55);
      box-shadow: 0 0 16px rgba(255,255,255,.28);
      transform: translateY(0);
      animation: twinkle 1.8s infinite ease-in-out;
    }
    .bulb:nth-child(2){animation-delay:.12s}
    .bulb:nth-child(3){animation-delay:.24s}
    .bulb:nth-child(4){animation-delay:.36s}
    .bulb:nth-child(5){animation-delay:.48s}
    .bulb:nth-child(6){animation-delay:.60s}
    .bulb:nth-child(7){animation-delay:.72s}
    @keyframes twinkle{
      0%,100%{opacity:.55; transform: translateY(0)}
      50%{opacity:1; transform: translateY(-2px)}
    }
    .doorWrap{
      position:absolute; inset: 52px 22px 22px;
      border-radius: 16px;
      perspective: 1400px;
      overflow:hidden;
      background: rgba(0,0,0,.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
    }
    .behind{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      padding: 18px;
      text-align:center;
    }
    .message{
      max-width: 92%;
      transform: translateY(0);
      transition: opacity .6s ease, transform .6s ease, filter .6s ease;
    }
    .message .big{
      font-size: clamp(22px, 3.2vw, 34px);
      font-weight: 800;
      margin:0;
      letter-spacing:.5px;
      text-shadow: 0 10px 44px rgba(0,0,0,.45);
    }
    .message .small{
      margin: 10px 0 0;
      font-size: 14px;
      opacity:.82;
    }
    .gift{
      width: min(420px, 78%);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 22px 70px rgba(0,0,0,.45);
      transform: scale(.84);
      opacity:0;
      transition: opacity .8s ease, transform .8s cubic-bezier(.2,1.1,.2,1);
      position:relative;
    }
    .gift::before{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(circle at 50% 30%, rgba(255,211,122,.28), transparent 55%);
      opacity: .9;
      pointer-events:none;
      transform: translateY(-12px);
    }
    .gift img{
      width:100%; height:auto; display:block;
      position:relative; z-index:1;
    }

    .door{
      position:absolute;
      top:0; bottom:0;
      width:50%;
      transform-style: preserve-3d;
      transition: transform 1.15s cubic-bezier(.2,.9,.2,1);
      will-change: transform;
      background:
        linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.02)),
        repeating-linear-gradient(90deg, rgba(0,0,0,.18) 0 10px, rgba(0,0,0,.12) 10px 22px),
        linear-gradient(180deg, #6b3f22, #4b2b15);
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
    }
    .door.left{ left:0; transform-origin: left center; border-right: 1px solid rgba(0,0,0,.25); }
    .door.right{ right:0; transform-origin: right center; border-left: 1px solid rgba(0,0,0,.25); }

    .knob{
      position:absolute;
      top:50%; width:20px; height:20px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #fff1bf 0%, #ffd37a 35%, #c48b25 80%);
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
      transform: translateY(-50%);
    }
    .door.left .knob{ right: 18px; }
    .door.right .knob{ left: 18px; }

    /* OPEN state */
    .open .door.left{ transform: rotateY(-108deg); }
    .open .door.right{ transform: rotateY(108deg); }
    .open .message{ opacity:0; transform: translateY(10px) scale(.98); filter: blur(2px); }
    .open .gift{ opacity:1; transform: scale(1); }

    .footer{
      padding: 0 22px 20px;
      display:flex; justify-content:space-between; gap:12px; align-items:center;
      opacity:.78; font-size:12px;
    }
    .tiny{opacity:.86}
    .sparkle{
      position:absolute; inset:0; pointer-events:none;
      background:
        radial-gradient(6px 6px at 10% 18%, rgba(255,255,255,.16), transparent 55%),
        radial-gradient(8px 8px at 18% 62%, rgba(255,211,122,.18), transparent 60%),
        radial-gradient(7px 7px at 82% 36%, rgba(255,255,255,.15), transparent 55%),
        radial-gradient(10px 10px at 76% 72%, rgba(255,77,77,.13), transparent 60%),
        radial-gradient(7px 7px at 42% 30%, rgba(255,255,255,.13), transparent 55%);
      mix-blend-mode: screen;
      opacity:.8;
    }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <div class="card" id="card">
      <div class="top">
        <div class="title">
          <h1>ğŸ„ åœ£è¯å¿«ä¹</h1>
          <p>ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼Œé—¨ä¼šæ‰“å¼€ï¼Œç„¶åä½ çš„ç¤¼ç‰©å‡ºç°ã€‚</p>
        </div>
        <div class="badge" title="æœ¬é¡µé¢ä¸è”ç½‘ï¼Œç›´æ¥å¯ç”¨">
          <span class="dot"></span>
          <span>ç¦»çº¿å¯ç”¨</span>
        </div>
      </div>

      <div class="stage">
        <div class="hint">
          <button class="btn" id="startBtn">æ‰“å¼€åœ£è¯ç¤¼ç‰© ğŸ</button>
          <span>ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥ç‚¹é—¨ï¼‰</span>
        </div>

        <div class="scene" id="scene">
          <div class="sparkle"></div>
          <div class="lights" aria-hidden="true">
            <div class="bulb"></div><div class="bulb"></div><div class="bulb"></div>
            <div class="bulb"></div><div class="bulb"></div><div class="bulb"></div><div class="bulb"></div>
          </div>

          <div class="doorWrap" id="doorWrap">
            <div class="behind">
              <div class="message" id="msg">
                <p class="big">Merry Christmas âœ¨</p>
                <p class="small">é—¨æ‰“å¼€ä»¥åï¼Œç¤¼ç‰©ä¼šâ€œå¼¹â€å‡ºæ¥ã€‚</p>
              </div>

              <div class="gift" id="gift" aria-label="åœ£è¯ç¤¼ç‰©">
                <img src="./gift.jpg" alt="gift" />
              </div>
            </div>

            <div class="door left" aria-hidden="true"><div class="knob"></div></div>
            <div class="door right" aria-hidden="true"><div class="knob"></div></div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="tiny">æç¤ºï¼šå¦‚æœä½ è¦å‘ç»™åˆ«äººï¼Œæœ€çœäº‹æ˜¯ GitHub Pages / Netlifyã€‚</div>
        <div class="tiny">ğŸ…</div>
      </div>
    </div>
  </div>

  <script>
    // ---------- tiny snow + confetti canvas ----------
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    let W=0,H=0;

    function resize(){
      W = Math.floor(window.innerWidth * DPR);
      H = Math.floor(window.innerHeight * DPR);
      canvas.width=W; canvas.height=H;
    }
    window.addEventListener('resize', resize, {passive:true});
    resize();

    // Snow
    const snowCount = Math.round(Math.min(220, Math.max(120, (window.innerWidth*window.innerHeight)/9000)));
    const snow = Array.from({length:snowCount}, () => ({
      x: Math.random()*W,
      y: Math.random()*H,
      r: (Math.random()*1.6 + 0.6)*DPR,
      vx:(Math.random()*0.4 - 0.2)*DPR,
      vy:(Math.random()*1.1 + 0.5)*DPR,
      o: Math.random()*0.7 + 0.2
    }));

    // Confetti particles (spawn on open)
    let confetti = [];
    function burstConfetti(){
      const n = 150;
      const cx = W*0.5, cy = H*0.42;
      for(let i=0;i<n;i++){
        const a = Math.random()*Math.PI*2;
        const s = (Math.random()*6 + 4)*DPR;
        confetti.push({
          x: cx + (Math.random()*40-20)*DPR,
          y: cy + (Math.random()*20-10)*DPR,
          vx: Math.cos(a)*s,
          vy: Math.sin(a)*s - 2*DPR,
          g: (Math.random()*0.10 + 0.06)*DPR,
          life: Math.random()*70 + 60,
          w: (Math.random()*8 + 4)*DPR,
          h: (Math.random()*6 + 3)*DPR,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*0.18 - 0.09),
          o: 1
        });
      }
    }

    function tick(){
      ctx.clearRect(0,0,W,H);

      // snow
      for(const p of snow){
        p.x += p.vx; p.y += p.vy;
        if(p.y > H + 10*DPR){ p.y = -10*DPR; p.x = Math.random()*W; }
        if(p.x < -10*DPR) p.x = W+10*DPR;
        if(p.x > W+10*DPR) p.x = -10*DPR;
        ctx.globalAlpha = p.o;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = '#fff';
        ctx.fill();
      }

      // confetti
      if(confetti.length){
        const next = [];
        for(const c of confetti){
          c.vy += c.g;
          c.x += c.vx;
          c.y += c.vy;
          c.rot += c.vr;
          c.life -= 1;
          c.o = Math.max(0, Math.min(1, c.life/120));
          ctx.save();
          ctx.translate(c.x, c.y);
          ctx.rotate(c.rot);
          ctx.globalAlpha = c.o;
          // no fixed colors rule isn't relevant here (this is not a chart), but keep festive variety
          const hue = (c.life*3)%360;
          ctx.fillStyle = `hsl(${hue} 85% 70%)`;
          ctx.fillRect(-c.w/2, -c.h/2, c.w, c.h);
          ctx.restore();
          if(c.life > 0 && c.y < H + 80*DPR) next.push(c);
        }
        confetti = next;
      }

      ctx.globalAlpha = 1;
      requestAnimationFrame(tick);
    }
    tick();

    // ---------- Door open interaction ----------
    const card = document.getElementById('card');
    const doorWrap = document.getElementById('doorWrap');
    const startBtn = document.getElementById('startBtn');

    let opened = false;
    function openDoor(){
      if(opened) return;
      opened = true;
      card.classList.add('open');
      startBtn.disabled = true;
      burstConfetti();
      // tiny haptic-like feedback (visual): shake
      const scene = document.getElementById('scene');
      scene.animate([
        { transform: 'translateX(0px)' },
        { transform: 'translateX(-2px)' },
        { transform: 'translateX(2px)' },
        { transform: 'translateX(0px)' }
      ], { duration: 260, easing: 'ease-out' });
    }

    startBtn.addEventListener('click', openDoor);
    doorWrap.addEventListener('click', openDoor);

    // auto hint: if user does nothing, gently pulse button
    setTimeout(() => {
      if(opened) return;
      startBtn.animate([{transform:'scale(1)'},{transform:'scale(1.03)'},{transform:'scale(1)'}],{duration:900,iterations:2});
    }, 1200);
  </script>
</body>
</html>
